â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   IFM-RUTA MCP v0.1.0 â†’ v1.0.0 UPGRADE                      â•‘
â•‘                          SPLIT PHASE PLAN (English)                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ DOCUMENT STRUCTURE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. UPGRADE_PLAN_2026.md (Main Overview)
   â”œâ”€ Executive summary
   â”œâ”€ Goals & objectives
   â”œâ”€ 4-phase structure
   â”œâ”€ Success criteria
   â”œâ”€ Resource requirements
   â””â”€ Risk mitigation

2. PHASE_1.md (Foundation & Protocol - Weeks 1-4)
   â”œâ”€ Task 1.1: MCP Protocol Upgrade
   â”‚  â”œâ”€ Research MCP 1.0 spec
   â”‚  â”œâ”€ Update dependencies (Cargo.toml)
   â”‚  â””â”€ Refactor protocol types (MCPRequest, MCPResponse, etc.)
   â”œâ”€ Task 1.2: Async Architecture
   â”‚  â”œâ”€ Create AsyncTool trait
   â”‚  â”œâ”€ Create StreamingTool trait
   â”‚  â””â”€ Refactor MCP server to async
   â””â”€ Task 1.3: Input Validation Framework
      â”œâ”€ JSON schema support
      â””â”€ Define tool schemas

3. PHASE_2.md (Core Features - Weeks 5-8)
   â”œâ”€ Task 2.1: Streaming Infrastructure
   â”‚  â”œâ”€ StreamingResponse wrapper
   â”‚  â”œâ”€ Streaming JSON-RPC format
   â”‚  â””â”€ Convert interactive_feedback to streaming
   â”œâ”€ Task 2.2: Multi-Tool Framework
   â”‚  â”œâ”€ ToolRegistry implementation
   â”‚  â”œâ”€ Dynamic tool loading
   â”‚  â””â”€ Tool examples & docs
   â””â”€ Task 2.3: Sampling & Cost Management
      â”œâ”€ SamplingHandler for AI calls
      â””â”€ Metrics collection

4. PHASE_3.md (Testing & Documentation - Weeks 9-12)
   â”œâ”€ Task 3.1: Integration Testing
   â”‚  â”œâ”€ Unit tests (85%+ coverage)
   â”‚  â”œâ”€ Integration tests (Cursor, SDK)
   â”‚  â””â”€ Performance benchmarks
   â”œâ”€ Task 3.2: Documentation
   â”‚  â”œâ”€ API reference
   â”‚  â”œâ”€ Migration guide
   â”‚  â””â”€ Tool development guide
   â””â”€ Task 3.3: Compatibility Layer (Optional)
      â””â”€ Legacy v0.1.0 tool wrapper

5. PHASE_4.md (Polish & Release - Weeks 13-16)
   â”œâ”€ Task 4.1: Final Optimization
   â”‚  â”œâ”€ Performance tuning
   â”‚  â”œâ”€ Security audit
   â”‚  â””â”€ Code quality gates
   â”œâ”€ Task 4.2: Release Preparation
   â”‚  â”œâ”€ Version bump (0.1.0 â†’ 1.0.0)
   â”‚  â”œâ”€ Build artifacts
   â”‚  â””â”€ GitHub release
   â””â”€ Task 4.3: Launch
      â”œâ”€ Release announcement
      â””â”€ Community engagement

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š TIMELINE & MILESTONES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Week 1-4  â”‚ PHASE 1: Foundation & Protocol Update
          â”‚ Gate: âœ… Compiles, basic tests pass
          â”‚ Output: Updated Cargo.toml, async traits, validator framework
          â”‚
Week 5-8  â”‚ PHASE 2: Core Features
          â”‚ Gate: âœ… Streaming works, multi-tool registered
          â”‚ Output: StreamingResponse, ToolRegistry, SamplingHandler
          â”‚
Week 9-12 â”‚ PHASE 3: Integration & Testing
          â”‚ Gate: âœ… 85%+ coverage, all integrations tested
          â”‚ Output: Test suite, comprehensive docs, optional compat layer
          â”‚
Week 13-16â”‚ PHASE 4: Polish & Release
          â”‚ Gate: âœ… Production-ready, v1.0.0 released
          â”‚ Output: Optimized binary, release artifacts, announcements

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ SUCCESS CRITERIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FUNCTIONAL
  âœ… MCP 1.0 protocol fully implemented
  âœ… Streaming responses working end-to-end
  âœ… Multi-tool framework operational
  âœ… Tool registration & discovery working
  âœ… Async execution stable

PERFORMANCE
  âœ… Startup < 1 second
  âœ… Memory < 30MB
  âœ… Streaming latency < 100ms
  âœ… 100 concurrent requests supported

QUALITY
  âœ… Test coverage â‰¥ 85%
  âœ… Zero clippy warnings
  âœ… All documentation complete
  âœ… Security audit passed

COMPATIBILITY
  âœ… Works with Cursor 2026+
  âœ… Works with Claude 4
  âœ… Compatible with Anthropic SDK
  âœ… Optional backward compatibility

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ DEPENDENCY CHANGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ADD (New):
  â€¢ async-trait = "0.1"
  â€¢ jsonschema = "0.16"
  â€¢ pin-project = "1.1"

UPDATE:
  â€¢ mcp = "1.0"  (from "0.1.0")
  â€¢ tokio = "1.0" (ensure latest)

REMOVE:
  â€¢ None - fully backward compatible in dependencies

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš¨ KEY RISKS & MITIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Risk: MCP spec changes again
  Impact: High | Probability: Low
  Mitigation: Monitor MCP repo, use feature flags

Risk: Async complexity
  Impact: High | Probability: Medium
  Mitigation: Start with sync, gradually async

Risk: Streaming overhead
  Impact: Medium | Probability: Low
  Mitigation: Benchmark early, optimize late

Risk: Breaking changes
  Impact: High | Probability: High
  Mitigation: Long deprecation period, compat layer

Risk: Token budget limits
  Impact: Medium | Probability: Medium
  Mitigation: Implement pagination, chunking

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ‘¥ TEAM REQUIREMENTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TEAM SIZE:
  â€¢ Lead Developer (1): Architect, Protocol, Testing
  â€¢ Backend Dev (1): Features, Integration
  â€¢ DevOps (0.5): CI/CD, Release

SKILLS NEEDED:
  â€¢ Advanced Rust (async, trait systems)
  â€¢ MCP protocol knowledge
  â€¢ Tokio/async runtime experience
  â€¢ JSON-RPC implementations
  â€¢ Integration testing

TOOLS & INFRASTRUCTURE:
  â€¢ GitHub Actions (existing)
  â€¢ Rust 1.70+ (existing)
  â€¢ MCP test harness
  â€¢ Local testing with Claude/Anthropic SDK

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ QUICK START: HOW TO USE THIS PLAN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. REVIEW & APPROVE
   â†’ Read UPGRADE_PLAN_2026.md for overview
   â†’ Review each PHASE_*.md file for details
   â†’ Discuss with team, get buy-in

2. SETUP DEVELOPMENT
   â†’ Create branch: git checkout -b feature/mcp-1.0
   â†’ Setup task board (GitHub Projects)
   â†’ Assign team members

3. BEGIN PHASE 1
   â†’ Read PHASE_1.md in detail
   â†’ Start with research task (3 days)
   â†’ Update Cargo.toml next (2 days)
   â†’ Refactor protocol types (5 days)

4. TRACK PROGRESS
   â†’ Use task checklists in each phase
   â†’ Run tests regularly: cargo test --all
   â†’ Monitor milestones weekly
   â†’ Adjust timeline as needed

5. GATE CHECKS
   â†’ At end of each phase, verify success gate
   â†’ Run full test suite before proceeding
   â†’ Conduct code review

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”— REFERENCES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MCP Protocol:
  https://modelcontextprotocol.io/

Rust Async:
  https://tokio.rs/tokio/tutorial
  https://rust-lang.github.io/async-book/

JSON Schema:
  https://json-schema.org/
  https://docs.rs/jsonschema/

Testing:
  https://bheisler.github.io/criterion.rs/book/
  https://github.com/xd009642/tarpaulin

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Created: 2026-02-04
Status: Ready for Implementation
Version: 1.0.0
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
